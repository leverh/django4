{% extends "base.html" %}

{% block content %}

  <img src="{{ recipe.image.url }}" alt="{{ recipe.headline }}" class="recipe-image">
  
  <h1>{{ recipe.headline }}</h1>
  <p>{{ recipe.description }}</p>

  <!-- <h2>Ingredients:</h2>
  <ul>
    {% for ingredient in recipe.ingredients %}
      <li>{{ ingredient }}</li>
    {% endfor %}
  </ul>

  <h2>Preparation:</h2>
  <ol>
    {% for step in recipe.preparation %}
      <li>{{ step }}</li>
    {% endfor %}
  </ol> -->

  <h2>Ingredients:</h2>
  <p>{{ recipe.ingredients|linebreaksbr }}</p>  

  <h2>Preparation:</h2>
  <p>{{ recipe.preparation|linebreaksbr }}</p>


  <p>Created by: <a href="{% url 'profile' pk=recipe.posted_by.pk %}">{{ recipe.posted_by }}</a></p>



  <p>Posted on: {{ recipe.date_posted }}</p>
  <p>Likes: {{ likes_count }}</p>

  {% if user.is_authenticated %}
    {% if user in recipe.liked_by.all %}
        <form action="{% url 'like' recipe.pk %}" method="POST">
            {% csrf_token %}
            <button type="submit">Unlike</button>
        </form>
    {% else %}
        <form action="{% url 'like' recipe.pk %}" method="POST">
            {% csrf_token %}
            <button type="submit">Like</button>
        </form>
    {% endif %}
  {% endif %}

  <a href="{% url 'recipe-update' pk=recipe.pk %}">Edit Recipe</a>
  <form action="{% url 'recipe-delete' recipe.pk %}" method="POST">
    {% csrf_token %}
    <input type="submit" value="Delete Recipe" onclick="return confirm('Are you sure you want to delete this recipe?');">
  </form>
{% endblock %}
